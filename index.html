<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Å™„Å§„Å©„ÇìÈ£ØÂ∫ó</title>
    <!-- PWA manifest & „Ç¢„Ç§„Ç≥„É≥Ë®≠ÂÆö -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" sizes="192x192" href="icon-192.png">
    <link rel="apple-touch-icon" sizes="512x512" href="icon-512.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="„Å™„Å§„Å©„ÇìÈ£ØÂ∫ó">
    <meta name="theme-color" content="#ff9800">
    <!-- Google Fonts: Kiwi Maru -->
    <link href="https://fonts.googleapis.com/css2?family=Kiwi+Maru:wght@400;700&display=swap" rel="stylesheet">
    <!-- CSS„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø -->
    <link rel="stylesheet" href="style.css">
    <!-- „Ç¢„Ç§„Ç≥„É≥Áî®„ÅÆFont Awesome„ÅÆË™≠„ÅøËæº„Åø -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- „Éò„ÉÉ„ÉÄ„ÉºÈÉ®ÂàÜÔºö„Ç¢„Éó„É™„ÅÆ„Çø„Ç§„Éà„É´„ÇíË°®Á§∫ -->
    <header class="header">
        <img src="ryourityou.png" class="header-icon" alt="ÊñôÁêÜÈï∑">
        <h1>„Å™„Å§„Å©„ÇìÈ£ØÂ∫ó
          <svg width="32" height="32" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align:middle; margin-left:0.3em;"><g><path d="M496.366,214.635c-10.877-23.746-26.644-42.705-44.134-57.888c-26.274-22.782-56.395-37.42-81.839-48.669c-12.71-5.608-24.291-10.356-33.447-14.59c-4.565-2.109-8.524-4.092-11.62-5.878c-3.104-1.769-5.332-3.388-6.422-4.392c-8.674-7.9-17.822-15.112-28.234-20.547c-10.364-5.427-22.189-8.958-34.971-8.934c-12.774-0.023-24.599,3.508-34.964,8.934c-10.412,5.435-19.567,12.648-28.241,20.547c-1.454,1.374-5.039,3.808-10,6.422c-8.729,4.645-21.55,10.088-36.109,16.518c-21.866,9.693-47.792,21.724-71.822,38.818c-12.015,8.563-23.572,18.406-33.826,29.956c-10.254,11.532-19.196,24.796-25.824,39.972C5.143,237.275,0,260.61,0,283.692c-0.032,31.929,9.962,63.394,30.366,90.26c20.389,26.906,50.904,49.08,91.105,63.914c36.686,13.532,81.231,20.389,134.229,20.396c53.005-0.007,97.551-6.864,134.236-20.396c40.114-14.803,70.748-36.985,91.296-63.868c20.57-26.842,30.8-58.298,30.768-90.212C512,260.523,506.644,237.046,496.366,214.635z M455.21,354.101c-16.281,21.281-41.322,39.98-76.626,53.037c-31.899,11.802-72.699,18.374-122.885,18.366c-50.178,0.008-90.979-6.564-122.877-18.366c-35.382-13.089-60.242-31.74-76.349-52.974c-16.075-21.266-23.675-45.256-23.715-70.472c0-18.217,4.053-37.08,12.174-55.668c7.781-17.798,19.773-32.514,34.339-45.154c21.795-18.958,49.294-32.83,74.201-44.008c12.465-5.609,24.251-10.554,34.56-15.412c3.792-1.793,7.322-3.587,10.72-5.419c-3.35,6.051-6.391,12.18-9.014,18.358c-8.01,18.896-12.497,38.258-12.497,57.161c0,1.367,0.016,2.733,0.071,4.1c0.126,3.618,3.16,6.446,6.778,6.319c3.609-0.126,6.438-3.168,6.311-6.778c-0.04-1.208-0.063-2.417-0.063-3.642c0-16.818,4.021-34.489,11.462-52.042c6.628-15.617,15.973-31.115,27.483-45.809c2.228-1.484,4.431-2.86,6.58-3.974c2.039-1.058,4.029-1.895,6.004-2.63c-0.316,3.982-0.521,7.994-0.529,12.087c0.008,20.357,3.8,41.868,10.348,62.493c6.549,20.626,15.855,40.374,27.072,57.168c2.014,3.01,6.082,3.824,9.084,1.81c3.018-2.007,3.824-6.075,1.817-9.085c-10.443-15.633-19.29-34.354-25.484-53.859c-6.201-19.504-9.732-39.806-9.724-58.527c-0.008-5.032,0.316-9.906,0.846-14.662c0.134,0,0.268-0.024,0.403-0.024c4.945,0.016,9.543,0.941,14.242,2.742c-0.213,1.707-0.332,3.421-0.332,5.135c0.008,9.938,3.484,19.575,8.966,28.612c8.271,13.563,21.147,26.061,35.777,36.993c14.637,10.91,31.06,20.207,46.559,26.914c3.318,1.438,7.173-0.094,8.611-3.413c1.438-3.317-0.094-7.181-3.413-8.618c-19.394-8.374-40.762-21.36-56.892-36.022c-8.073-7.323-14.828-15.057-19.441-22.656c-4.226-6.96-6.604-13.714-6.983-20.017c4.527,3.096,9.203,6.833,14.038,11.257c4.968,4.487,10.506,7.796,16.668,11.051c10.751,5.616,23.596,10.846,37.617,16.928c20.989,9.077,44.451,19.97,65.266,34.806c10.411,7.41,20.152,15.791,28.675,25.365c8.532,9.582,15.854,20.342,21.534,32.72c8.46,18.462,12.648,37.271,12.648,55.495C479.209,308.812,471.467,332.788,455.21,354.101z" fill="#4B4B4B"/></g></svg>
        </h1>
        <div class="storage-status" id="storage-status" title="„Çπ„Éà„É¨„Éº„Ç∏‰ΩøÁî®Èáè„ÇíË°®Á§∫">
          <i class="fas fa-database"></i>
          <span id="storage-usage" style="display: none;">0 B (0%)</span>
        </div>
    </header>

    <main class="main-container">
        <!-- „Çø„Éñ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ÔºöÁîªÈù¢‰∏äÈÉ®„ÅÆÂàá„ÇäÊõø„Åà„Éú„Çø„É≥ -->
        <div class="tab-navigation">
            <!-- „É¨„Ç∑„ÉîÁôªÈå≤„Çø„Éñ„ÇíÈñã„Åè„Éú„Çø„É≥ -->
            <button class="tab-btn active" data-tab="register">
                <i class="fas fa-pen-to-square"></i>
                <span>ÁôªÈå≤</span>
            </button>
            <!-- „É¨„Ç∑„Éî‰∏ÄË¶ß„Çø„Éñ„ÇíÈñã„Åè„Éú„Çø„É≥ -->
            <button class="tab-btn" data-tab="recipes">
                <i class="fas fa-utensils"></i>
                <span>„É¨„Ç∑„Éî</span>
            </button>
            <!-- Ë≤∑„ÅÑÁâ©„É™„Çπ„Éà„Çø„Éñ„ÇíÈñã„Åè„Éú„Çø„É≥ -->
            <button class="tab-btn" data-tab="shopping">
                <i class="fas fa-shopping-cart"></i>
                <span>Ë≤∑„ÅÑÁâ©„É°„É¢</span>
            </button>
            <button class="tab-btn" data-tab="custom-items">
                <i class="fas fa-list"></i>
                <span>„Åù„ÅÆ‰ªñ</span>
            </button>
        </div>

        <!-- „É¨„Ç∑„ÉîÁôªÈå≤„Çø„Éñ„ÅÆÂÜÖÂÆπÔºàÂàùÊúüË°®Á§∫Ôºâ -->
        <div class="tab-content active" id="register">
            <div class="card app-card">
                <div class="card-header">
                    <h2 class="section-title" id="register-title"><i class="fa-solid fa-pen-to-square" style="margin-right:0.38em;"></i>„É¨„Ç∑„ÉîÁôªÈå≤</h2> <!-- „Åì„Åì„Åß„É¨„Ç∑„Éî„ÅÆÊñ∞Ë¶èÁôªÈå≤„ÇíË°å„ÅÜ -->
                </div>
                <div class="card-content">
                    <!-- „É¨„Ç∑„ÉîÁôªÈå≤Áî®„Éï„Ç©„Éº„É† -->
                    <form id="recipe-form">
                        <!-- ÊñôÁêÜÂêç„ÅÆÂÖ•ÂäõÊ¨Ñ -->
                        <div class="form-group">
                            <label for="recipe-name">ÊñôÁêÜÂêç</label>
                            <input type="text" id="recipe-name" placeholder="ÊñôÁêÜÂêç„ÇíÂÖ•Âäõ" required>
                        </div>

                        <!-- ÊùêÊñô„ÅÆÂÖ•ÂäõÊ¨ÑÔºàË§áÊï∞Ë°åÂèØÔºâ -->
                        <div class="form-group">
                            <div class="ingredients-header">
    <label>ÊùêÊñô</label>
</div>
<div id="ingredients-container">
    <div class="ingredient-row">
        <input type="text" placeholder="ÊùêÊñôÂêç" class="ingredient-name" required>
        <input type="text" placeholder="Êï∞Èáè" class="ingredient-quantity">
        <button type="button" id="add-ingredient" class="btn-icon">
            <i class="fas fa-plus"></i>
        </button>
    </div>
</div>
                        </div>

                        <!-- Ë™øÂë≥Êñô„ÅÆÂÖ•ÂäõÊ¨ÑÔºàË§áÊï∞Ë°åÂèØÔºâ -->
                        <div class="form-group">
                            <div class="ingredients-header">
    <label>Ë™øÂë≥Êñô</label>
</div>
<div id="seasonings-container">
    <div class="ingredient-row">
        <input type="text" placeholder="Ë™øÂë≥ÊñôÂêç" class="ingredient-name">
        <input type="text" placeholder="Êï∞Èáè" class="ingredient-quantity">
        <button type="button" id="add-seasoning" class="btn-icon">
            <i class="fas fa-plus"></i>
        </button>
    </div>
</div>
                        </div>

                      <!-- ÂÜôÁúü„Ç¢„ÉÉ„Éó„É≠„Éº„ÉâÊ¨Ñ -->

                        <!-- ‰Ωú„ÇäÊñπ„Éª„Åù„ÅÆ‰ªñ„É°„É¢Ê¨Ñ -->
                        <div class="form-group">
                            <label for="recipe-notes">‰Ωú„ÇäÊñπ„Éª„Åù„ÅÆ‰ªñ„É°„É¢</label>
                            <textarea id="recipe-notes" placeholder="‰Ωú„ÇäÊñπ„ÇÑ„Éù„Ç§„É≥„Éà„ÄÅ„É°„É¢„Å™„Å©Ëá™Áî±„Å´Ë®òÂÖ•" rows="7" style="width:100%;min-height:120px;max-width:100%;padding:1em;border-radius:8px;border:1px solid #ddd;font-size:1.1em;background:#fff8e1;box-sizing:border-box;box-shadow:0 1px 4px rgba(0,0,0,0.04);"></textarea>
                        </div>

                        <!-- ÂÜôÁúü„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Çª„ÇØ„Ç∑„Éß„É≥ -->
                        <div class="form-group">
                            <div class="photo-upload-container">
                                <!-- „É°„É¢Áî®ÂÜôÁúü„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ -->
                                <div class="photo-upload-small">
                                    <label>Ê∑ª‰ªòÂÜôÁúü</label>
                                    <div class="photo-upload-inner" id="note-photo-upload" title="ÂÜôÁúü„ÇíËøΩÂä†">
                                        <i class="fas fa-paperclip"></i>
                                        <input type="file" id="note-photo-input" accept="image/*" style="display: none;">
                                    </div>
                                    <div id="note-photo-preview" class="photo-preview-small" style="display: none;">
                                        <img id="note-preview-image" alt="Ê∑ª‰ªòÂÜôÁúü„Éó„É¨„Éì„É•„Éº">
                                        <button type="button" id="remove-note-photo" class="btn-remove-photo" title="ÂâäÈô§">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>

                                <!-- ÂÆåÊàêÂÜôÁúü„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ -->
                                <div class="main-photo-upload">
                                    <label>ÂÆåÊàêÂÜôÁúü</label>
                                    <div class="photo-upload" id="photo-upload">
                                        <i class="fas fa-camera"></i>
                                        <p>ÂÜôÁúü„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ</p>
                                        <input type="file" id="photo-input" accept="image/*" style="display: none;">
                                    </div>
                                    <div id="photo-preview" class="photo-preview" style="display: none;">
                                        <img id="preview-image" alt="ÂÆåÊàêÂÜôÁúü„Éó„É¨„Éì„É•„Éº">
                                        <button type="button" id="remove-photo" class="btn-remove-photo">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" id="cancel-edit" class="btn-secondary" style="display: none;">„Ç≠„É£„É≥„Çª„É´</button>
                            <button type="submit" class="btn-primary">„É¨„Ç∑„Éî„ÇíÁôªÈå≤</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- „É¨„Ç∑„Éî‰∏ÄË¶ß„Çø„Éñ -->
        <div class="tab-content" id="recipes">
            <div class="app-card">
              <div class="recipes-header">
                <div class="header-title-container">
                  <h2 class="section-title"><i class="fa-solid fa-utensils" style="margin-right:0.38em;"></i>„É¨„Ç∑„Éî‰∏ÄË¶ß</h2>
                  <button id="delete-all-recipes" class="btn-delete icon-trash" title="ÂÖ®„É¨„Ç∑„Éî„ÇíÂâäÈô§" style="background:none;border:none;cursor:pointer;color:#e53935;font-size:1.3em;padding:0 4px;margin-left:8px;display:flex;align-items:center;">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
                <button id="add-to-shopping" class="btn-secondary" style="display: none;">Ë≤∑„ÅÑÁâ©„É™„Çπ„Éà„Å∏ÁôªÈå≤</button>
              </div>
              <!-- ‰∏¶„Å≥Êõø„ÅàUI -->
              <div class="sort-controls" style="margin-bottom: 0.7em;">
                <label for="recipe-sort-select" style="font-size:0.95em; margin-right:0.4em;">‰∏¶„Å≥Êõø„Åà:</label>
                <select id="recipe-sort-select" style="font-size:1em; padding: 0.2em 0.8em; border-radius:6px;">
                  <option value="popular">„Çà„Åè‰Ωú„ÇãÈ†Ü</option>
                  <option value="name">ÂêçÂâçÈ†Ü</option>
                  <option value="createdAt">Êñ∞ÁùÄÈ†Ü</option>
                  <option value="favorite">„ÅäÊ∞ó„Å´ÂÖ•„ÇäÈ†Ü</option>
                </select>
                <select id="recipe-sort-order" style="font-size:1em; padding: 0.2em 0.8em; border-radius:6px; margin-left:0.5em;">
                  <option value="desc">ÈôçÈ†Ü</option>
                  <option value="asc">ÊòáÈ†Ü</option>
                </select>
              </div>
            </div>
            <div id="recipes-container" class="recipes-container">
                <!-- „É¨„Ç∑„Éî„Åå„Åì„Åì„Å´ÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Åæ„Åô -->
            </div>
        </div>

        <!-- Ë≤∑„ÅÑÁâ©„É™„Çπ„Éà„Çø„Éñ -->
        <div class="tab-content" id="shopping">
            <div class="card app-card">
                <div class="card-header">
                    <div class="shopping-header">
                        <div style="display:flex;align-items:center;gap:8px;">
  <h2 class="section-title" style="margin:0;"><i class="fa-solid fa-shopping-cart" style="margin-right:0.38em;"></i>Ë≤∑„ÅÑÁâ©„É°„É¢</h2>
  <button id="clear-shopping" class="btn-secondary icon-trash" title="„É™„Çπ„ÉàÂàùÊúüÂåñ" style="background:none;border:none;cursor:pointer;color:#e53935;font-size:1.3em;padding:0 4px;">
    <i class="fas fa-trash"></i>
  </button>
</div>
                        <div id="shopping-history-area" class="shopping-history-area">
  <div style="margin-top:4px;">
    <button id="show-all-history" class="btn-history btn-small">Ë≤∑„ÅÑÁâ©Â±•Ê≠¥</button>
  </div>
</div>
                    </div>
                </div>
                <div class="card-content">
                    <div id="shopping-selected-recipes" style="display:none;"></div>
                    <div id="shopping-container" class="shopping-container">
                        <!-- Ë≤∑„ÅÑÁâ©„Ç¢„Ç§„ÉÜ„É†„Åå„Åì„Åì„Å´ÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Åæ„Åô -->
                    </div>
                    <div class="shopping-complete-row">
                        <button id="complete-shopping" class="btn-primary" disabled>Ë≤∑„ÅÑÁâ©ÂÆå‰∫Ü</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÊùêÊñô‰ª•Â§ñ„Çø„Éñ -->
        <div class="tab-content" id="custom-items">
            <div class="card app-card">
                <div class="card-header">
                    <div class="tab-header" style="display: flex; align-items: center;">
                        <h2 class="section-title" style="margin: 0 10px 0 0;"><i class="fa-solid fa-list" style="margin-right:0.38em;"></i>„Åù„ÅÆ‰ªñ</h2>
                        <button id="clear-custom-items" class="btn-remove icon-trash" title="„Åô„Åπ„Å¶„ÅÆ„Åù„ÅÆ‰ªñ„ÅÆË≤∑„ÅÑÁâ©„É™„Çπ„Éà„ÇíÂâäÈô§">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
                <div class="card-content">
                    <form id="custom-item-form">
                        <div class="form-group">
                            <label for="item-name">„Ç¢„Ç§„ÉÜ„É†Âêç</label>
                            <input type="text" id="item-name" placeholder="‰æã: „Éà„Ç§„É¨„ÉÉ„Éà„Éö„Éº„Éë„Éº" required>
                        </div>
                        <div class="form-group">
                            <label for="item-quantity">Êï∞ÈáèÔºà‰ªªÊÑèÔºâ</label>
                            <input type="text" id="item-quantity" placeholder="‰æã: 1ÂÄã">
                        </div>
                        <button type="submit" class="btn-primary">„Åù„ÅÆ‰ªñ„ÅÆË≤∑„ÅÑÁâ©„ÇíÁôªÈå≤</button>
                        <p style="margin-top: 10px; font-size: 0.9em; color: #666;">‚Äª ÁôªÈå≤„Åó„Åü„Ç¢„Ç§„ÉÜ„É†„ÅØ‰∏ã„ÅÆ„É™„Çπ„Éà„Å´Ë°®Á§∫„Åï„Çå„ÄÅÂøÖË¶Å„Å™„ÇÇ„ÅÆ„ÇíÈÅ∏Êäû„Åó„Å¶Ë≤∑„ÅÑÁâ©„É™„Çπ„Éà„Å´ËøΩÂä†„Åß„Åç„Åæ„Åô</p>
                    </form>
                    <div id="custom-items-list" class="custom-items-list">
                        <!-- ËøΩÂä†„Åï„Çå„Åü„Ç¢„Ç§„ÉÜ„É†„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- „É¨„Ç∑„ÉîË©≥Á¥∞„É¢„Éº„ÉÄ„É´ -->
    <div id="recipe-detail-modal" class="modal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(255,180,50,0.12);z-index:1000;justify-content:center;align-items:center;">
  <div class="modal-content pop-modal" style="background:linear-gradient(135deg,#fffbe9 80%,#ffe0b2 100%);padding:2.2em 2em 2em 2em;max-width:430px;width:92vw;border-radius:20px;box-shadow:0 4px 32px rgba(255,152,0,0.18),0 1.5px 8px rgba(0,0,0,0.12);position:relative;overflow-y:auto;max-height:90vh;">
    <button id="close-detail-modal" style="position:absolute;top:1.1em;right:1.1em;background:rgba(255,235,59,0.88);border:none;font-size:1.7em;cursor:pointer;width:2em;height:2em;border-radius:50%;box-shadow:0 2px 6px #ffd54f80;transition:background 0.2s;">√ó</button>
    <h2 id="modal-recipe-title" style="margin-top:0;font-family:'Kiwi Maru',sans-serif;font-size:1.7em;color:#ff9800;text-shadow:0 1px 0 #fffde7,0 2px 6px #ffd54f80;letter-spacing:0.03em;display:flex;align-items:center;gap:0.4em;"><span style="font-size:1.1em;">üç≥</span><span></span></h2>
    <div id="modal-recipe-image" style="margin-bottom:1em;text-align:center;"></div>
    <div style="background:#fffde7;border-radius:12px;padding:1em 1.2em 0.7em 1.2em;margin-bottom:1.3em;box-shadow:0 2px 8px #ffd54f55;">
      <h3 style="margin-bottom:0.5em;color:#ff9800;font-size:1.13em;display:inline-block;vertical-align:middle;">ü•ó ÊùêÊñô</h3>
      <ul id="modal-recipe-ingredients" style="margin:0 0 0.7em 0.5em;padding:0;list-style:none;font-size:1.08em;">
      </ul>
    </div>
    <div id="seasoning-section" style="background:#fff8e1;border-radius:12px;padding:1em 1.2em 0.7em 1.2em;margin-bottom:1.3em;box-shadow:0 2px 8px #ffd54f55;display:none;">
      <h3 style="margin-bottom:0.5em;color:#ff9800;font-size:1.13em;display:inline-block;vertical-align:middle;">üßÇ Ë™øÂë≥Êñô</h3>
      <ul id="modal-recipe-seasonings" style="margin:0 0 0.7em 0.5em;padding:0;list-style:none;font-size:1.08em;">
      </ul>
    </div>
    <div style="background:#ffe0b2;border-radius:12px;padding:1em 1.2em 0.7em 1.2em;box-shadow:0 2px 8px #ffd54f55;">
      <h3 style="margin-bottom:0.5em;color:#ff9800;font-size:1.13em;display:inline-block;vertical-align:middle;">üìù ‰Ωú„ÇäÊñπ„Éª„Åù„ÅÆ‰ªñ„É°„É¢</h3>
      <div id="modal-recipe-notes" style="white-space:pre-line;font-size:1.08em;color:#795548;margin-bottom:0.5em;"></div>
      <div id="modal-note-photo"></div>
    </div>
  </div>
</div>


<script>
(function(){
  // „É¢„Éº„ÉÄ„É´Ë°®Á§∫ÊôÇ„ÅØbody„ÅÆ„Çπ„ÇØ„É≠„Éº„É´„ÇíÁ¶ÅÊ≠¢
  const modal = document.getElementById('recipe-detail-modal');
  const closeBtn = document.getElementById('close-detail-modal');
  if(modal && closeBtn){
    const preventScroll = () => { document.body.style.overflow = 'hidden'; };
    const allowScroll = () => { document.body.style.overflow = ''; };
    modal.addEventListener('show', preventScroll);
    modal.addEventListener('hide', allowScroll);
    // Êó¢Â≠ò„ÅÆË°®Á§∫ÂàáÊõø„Å´„ÇÇhook
    const origDisplay = modal.style.display;
    const observer = new MutationObserver(() => {
      if(modal.style.display === 'flex') preventScroll();
      else allowScroll();
    });
    observer.observe(modal, { attributes: true, attributeFilter: ['style'] });
    closeBtn.addEventListener('click', allowScroll);
    window.addEventListener('beforeunload', allowScroll);
  }
})();
</script>


    <!-- Â±•Ê≠¥„É¢„Éº„ÉÄ„É´ -->
    <div id="history-modal" class="history-modal" style="display:none;">
      <div class="history-modal-content">
        <div class="history-modal-header">
          <h2>Ë≤∑„ÅÑÁâ©Â±•Ê≠¥</h2>
          <button id="close-history-modal" class="btn-close">√ó</button>
        </div>
        <div id="history-modal-list" class="history-list">
          <!-- Â±•Ê≠¥‰∏ÄË¶ß„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô -->
        </div>
        <div class="history-modal-actions">
          <button id="clear-all-history" class="btn-danger">„Åô„Åπ„Å¶„ÅÆÂ±•Ê≠¥„ÇíÂâäÈô§</button>
        </div>
      </div>
    </div>
    <!-- JavaScript„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„ÅøÔºà„Ç¢„Éó„É™„ÅÆÂãï‰Ωú„ÇíÂà∂Âæ°Ôºâ -->
    <script src="db.js" type="module"></script>
    <script src="script.js" type="module"></script>
</body>
</html>
